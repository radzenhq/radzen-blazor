@inherits RadzenComponentWithChildren

@if (Visible)
{
    <ul @ref="@Element" style="@Style" @attributes="Attributes" class="@GetCssClass()" id="@GetId()" 
        role="menu" aria-label="@ToggleAriaLabel" tabindex="0"
        @onkeydown="@OnKeyPress" @onkeydown:preventDefault=preventKeyPress @onkeydown:stopPropagation>
        <li class="rz-navigation-item">
            <div class="rz-navigation-item-wrapper" role="button" tabindex="0" aria-haspopup="menu"
                 aria-label="@ToggleAriaLabel"
                 aria-expanded="@(!Collapsed).ToString().ToLowerInvariant()" aria-controls="@($"{GetId()}-menu")"
                 onclick="Radzen.toggleMenuItem(this)" @onkeydown="OnToggleKeyDown">
                <div class="rz-navigation-item-link">
                    <div class="item-text" @onkeydown:stopPropagation>
                        @if (Template != null)
                        {
                            @Template
                        }
                    </div>
                    @if (ShowIcon)
                    {
                        <i class=@ToggleClass>keyboard_arrow_down</i>
                    }
                </div>
            </div>
            <ul id="@($"{GetId()}-menu")" class="rz-navigation-menu" role="menu" style="@contentStyle"
                aria-hidden="@(Collapsed ? "true" : "false")" @onkeydown:stopPropagation>
                <CascadingValue Value=this>
                    @ChildContent
                </CascadingValue>
            </ul>
        </li>
    </ul>
}
