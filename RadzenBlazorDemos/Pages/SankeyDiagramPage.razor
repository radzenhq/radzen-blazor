@page "/sankey-diagram"

<RadzenText TextStyle="TextStyle.H2" TagName="TagName.H1" class="rz-pt-8">
    Radzen Blazor Sankey Diagram
</RadzenText>
<RadzenText TextStyle="TextStyle.Subtitle1" class="rz-pb-4">
    The Radzen Blazor Sankey Diagram component visualizes flow and relationships between nodes in a system. Perfect for showing how values flow from one set of entities to another, such as energy distribution, budget allocation, or process workflows.
</RadzenText>

<RadzenText Anchor="sankey-diagram#basic-usage" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-8">
    Basic usage
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    RadzenSankeyDiagram requires three essential properties to display your data:
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <code>Data</code> - specifies the data source containing flow information.
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <code>SourceProperty</code> - the name of the property that provides the source node identifier.
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <code>TargetProperty</code> - the name of the property that provides the target node identifier.
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-8">
    <code>ValueProperty</code> - the name of the property that provides the flow value between nodes.
</RadzenText>

<RadzenExample ComponentName="SankeyDiagram" Example="SankeyDiagramSimple">
    <SankeyDiagramSimple />
</RadzenExample>

<RadzenText Anchor="sankey-diagram#node-labels" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-12">
    Node Labels
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-8">
    Use the <code>SourceLabelProperty</code> and <code>TargetLabelProperty</code> parameters to specify which properties contain the display labels for your nodes. This follows the same pattern as other property-based parameters.
</RadzenText>

<RadzenExample ComponentName="SankeyDiagram" Example="SankeyDiagramEnergyFlow">
    <SankeyDiagramEnergyFlow />
</RadzenExample>

<RadzenText Anchor="sankey-diagram#custom-colors" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-12">
    Custom Colors
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-8">
    Override the default color scheme using <code>NodeFills</code> and <code>LinkFills</code> parameters. Provide a list of colors that will be applied to nodes and links based on their index.
</RadzenText>

<RadzenExample ComponentName="SankeyDiagram" Example="SankeyDiagramBudgetFlow">
    <SankeyDiagramBudgetFlow />
</RadzenExample>

<RadzenText Anchor="sankey-diagram#generic-data" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-12">
    Working with Custom Data Types
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-8">
    RadzenSankeyDiagram works with any data type using property selectors. Simply specify which properties contain your source, target, and value data. Use <code>NodeAlignment</code> to control how nodes are positioned vertically.
</RadzenText>

<RadzenExample ComponentName="SankeyDiagram" Example="SankeyDiagramGenericData">
    <SankeyDiagramGenericData />
</RadzenExample>

<RadzenText Anchor="sankey-diagram#step-by-step-tutorial" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-12">
    Step-by-Step Tutorial
</RadzenText>

<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <strong>Step 1: Define your data model</strong>
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    Define a class with properties for source, target, value, and optionally labels:
</RadzenText>

<pre class="rz-mb-4" style="background-color: var(--rz-base-100); padding: 1rem; border-radius: var(--rz-border-radius); overflow-x: auto;">
<code>// Basic model - IDs will be used as labels
public class EnergyFlow
{
    public string From { get; set; }
    public string To { get; set; }
    public double Amount { get; set; }
}

// Model with custom labels
public class EnergyFlowWithLabels
{
    public string From { get; set; }
    public string To { get; set; }
    public double Amount { get; set; }
    public string FromLabel { get; set; }
    public string ToLabel { get; set; }
}

// Create your data
var energyFlows = new List&lt;EnergyFlowWithLabels&gt;
{
    new EnergyFlowWithLabels 
    { 
        From = "coal", 
        FromLabel = "Coal Power",
        To = "electricity", 
        ToLabel = "Electric Grid",
        Amount = 35 
    },
    new EnergyFlowWithLabels 
    { 
        From = "solar", 
        FromLabel = "Solar Energy",
        To = "electricity", 
        ToLabel = "Electric Grid",
        Amount = 15 
    }
};</code>
</pre>

<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <strong>Step 2: Add the component to your page</strong>
</RadzenText>

<pre class="rz-mb-4" style="background-color: var(--rz-base-100); padding: 1rem; border-radius: var(--rz-border-radius); overflow-x: auto;">
<code>&lt;!-- Basic usage without labels --&gt;
&lt;RadzenSankeyDiagram TItem="EnergyFlow" 
                     Data="@@energyFlows"
                     SourceProperty="From"
                     TargetProperty="To"
                     ValueProperty="Amount" /&gt;

&lt;!-- With custom labels --&gt;
&lt;RadzenSankeyDiagram TItem="EnergyFlowWithLabels" 
                     Data="@@energyFlows"
                     SourceProperty="From"
                     TargetProperty="To"
                     ValueProperty="Amount"
                     SourceLabelProperty="FromLabel"
                     TargetLabelProperty="ToLabel" /&gt;</code>
</pre>

<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <strong>Step 3: Customize appearance (optional)</strong>
</RadzenText>

<pre class="rz-mb-4" style="background-color: var(--rz-base-100); padding: 1rem; border-radius: var(--rz-border-radius); overflow-x: auto;">
<code>// Option A: Use built-in color schemes
&lt;RadzenSankeyDiagram Data="@@data" 
                     ColorScheme="ColorScheme.Palette" /&gt;

// Available color schemes:
// - ColorScheme.Pastel (default)
// - ColorScheme.Palette
// - ColorScheme.Monochrome
// - ColorScheme.Divergent</code>
</pre>

<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <strong>Step 4: Complete example</strong>
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    Here's a comprehensive example showing all features:
</RadzenText>

<pre class="rz-mb-8" style="background-color: var(--rz-base-100); padding: 1rem; border-radius: var(--rz-border-radius); overflow-x: auto;">
<code>@@page "/energy-flow"

&lt;RadzenSankeyDiagram TItem="EnergyTransfer"
                     Data="@@energyData" 
                     SourceProperty="Source"
                     TargetProperty="Target"
                     ValueProperty="Value"
                     SourceLabelProperty="SourceLabel"
                     TargetLabelProperty="TargetLabel"
                     NodeFills="@@nodeColors"
                     LinkFills="@@linkColors"
                     ColorScheme="ColorScheme.Palette"
                     NodeWidth="30"
                     NodePadding="15"
                     NodeAlignment="SankeyAlignment.Justify"
                     Style="height: 500px" /&gt;

@@code {
    public class EnergyTransfer
    {
        public string Source { get; set; }
        public string Target { get; set; }
        public double Value { get; set; }
        public string SourceLabel { get; set; }
        public string TargetLabel { get; set; }
    }

    private List&lt;EnergyTransfer&gt; energyData = new()
    {
        // Energy sources to grid
        new() { 
            Source = "coal", SourceLabel = "Coal Power",
            Target = "grid", TargetLabel = "Electric Grid", 
            Value = 35 
        },
        new() { 
            Source = "solar", SourceLabel = "Solar Energy",
            Target = "grid", TargetLabel = "Electric Grid", 
            Value = 15 
        },
        new() { 
            Source = "wind", SourceLabel = "Wind Energy",
            Target = "grid", TargetLabel = "Electric Grid", 
            Value = 20 
        },
        new() { 
            Source = "nuclear", SourceLabel = "Nuclear Power",
            Target = "grid", TargetLabel = "Electric Grid", 
            Value = 30 
        },
        
        // Grid to consumers
        new() { 
            Source = "grid", SourceLabel = "Electric Grid",
            Target = "industry", TargetLabel = "Industrial", 
            Value = 40 
        },
        new() { 
            Source = "grid", SourceLabel = "Electric Grid",
            Target = "residential", TargetLabel = "Residential", 
            Value = 35 
        },
        new() { 
            Source = "grid", SourceLabel = "Electric Grid",
            Target = "commercial", TargetLabel = "Commercial", 
            Value = 20 
        },
        new() { 
            Source = "grid", SourceLabel = "Electric Grid",
            Target = "losses", TargetLabel = "Transmission Losses", 
            Value = 5 
        }
    };

    // Custom colors for nodes (optional)
    private List&lt;string&gt; nodeColors = new()
    {
        "#2C3E50",  // Coal - dark gray
        "#F39C12",  // Solar - orange  
        "#3498DB",  // Wind - blue
        "#8E44AD",  // Nuclear - purple
        "#E74C3C",  // Grid - red
        "#95A5A6",  // Industry - gray
        "#1ABC9C",  // Residential - turquoise
        "#F1C40F",  // Commercial - yellow
        "#34495E"   // Losses - dark gray
    };

    // Custom colors for links (optional - usually inherit from source)
    private List&lt;string&gt; linkColors = new()
    {
        "#2C3E5080",  // Coal to Grid
        "#F39C1280",  // Solar to Grid
        "#3498DB80",  // Wind to Grid
        "#8E44AD80",  // Nuclear to Grid
        "#E74C3C80",  // Grid to Industry
        "#E74C3C80",  // Grid to Residential
        "#E74C3C80",  // Grid to Commercial
        "#E74C3C60"   // Grid to Losses (more transparent)
    };
}</code>
</pre>

<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-4">
    <strong>Tips and Best Practices</strong>
</RadzenText>
<RadzenText TextStyle="TextStyle.Body2" class="rz-mb-2">
    • <strong>Node IDs</strong>: Use consistent, unique identifiers for your nodes across all links
</RadzenText>
<RadzenText TextStyle="TextStyle.Body2" class="rz-mb-2">
    • <strong>Labels vs IDs</strong>: Keep IDs short and system-friendly; use labels for display text
</RadzenText>
<RadzenText TextStyle="TextStyle.Body2" class="rz-mb-2">
    • <strong>Colors</strong>: Links automatically inherit their source node's color with transparency
</RadzenText>
<RadzenText TextStyle="TextStyle.Body2" class="rz-mb-2">
    • <strong>Data Structure</strong>: Each item in your data represents one flow/link between nodes
</RadzenText>
<RadzenText TextStyle="TextStyle.Body2" class="rz-mb-8">
    • <strong>Performance</strong>: For large datasets, consider aggregating small flows to improve readability
</RadzenText>


<RadzenText Anchor="sankey-diagram#properties" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-12">
    RadzenSankeyDiagram Properties
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-8">
    Complete list of all available properties for the RadzenSankeyDiagram component:
</RadzenText>

<RadzenCard class="rz-mb-8">
    <RadzenDataGrid TItem="ComponentProperty" Data="@componentProperties" ShowPagingSummary="false" 
                    PagerHorizontalAlign="HorizontalAlign.Left" AllowPaging="false" 
                    AllowSorting="false" Density="Density.Compact">
        <Columns>
            <RadzenDataGridColumn TItem="ComponentProperty" Property="Name" Title="Property" Width="200px">
                <Template Context="data">
                    <code>@data.Name</code>
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="ComponentProperty" Property="Type" Title="Type" Width="250px">
                <Template Context="data">
                    <code style="font-size: 0.875rem;">@data.Type</code>
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="ComponentProperty" Property="Default" Title="Default" Width="120px" />
            <RadzenDataGridColumn TItem="ComponentProperty" Property="Description" Title="Description" />
        </Columns>
    </RadzenDataGrid>
</RadzenCard>

<RadzenText Anchor="sankey-diagram#alignment-options" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-12">
    Node Alignment Options
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-8">
    The <code>NodeAlignment</code> property controls how nodes are positioned vertically within each column:
</RadzenText>

<RadzenCard class="rz-mb-8">
    <RadzenDataGrid TItem="AlignmentOption" Data="@alignmentOptions" ShowPagingSummary="false" 
                    PagerHorizontalAlign="HorizontalAlign.Left" AllowPaging="false" 
                    AllowSorting="false" Density="Density.Compact">
        <Columns>
            <RadzenDataGridColumn TItem="AlignmentOption" Property="Value" Title="Value" Width="200px">
                <Template Context="data">
                    <code>SankeyAlignment.@data.Value</code>
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="AlignmentOption" Property="Description" Title="Description" />
        </Columns>
    </RadzenDataGrid>
</RadzenCard>

<RadzenText Anchor="sankey-diagram#color-schemes" TextStyle="TextStyle.H5" TagName="TagName.H2" class="rz-pt-12">
    Color Schemes
</RadzenText>
<RadzenText TextStyle="TextStyle.Body1" class="rz-mb-8">
    Available built-in color schemes for the <code>ColorScheme</code> property:
</RadzenText>

<RadzenCard>
    <RadzenDataGrid TItem="ColorSchemeOption" Data="@colorSchemes" ShowPagingSummary="false" 
                    PagerHorizontalAlign="HorizontalAlign.Left" AllowPaging="false" 
                    AllowSorting="false" Density="Density.Compact">
        <Columns>
            <RadzenDataGridColumn TItem="ColorSchemeOption" Property="Value" Title="Value" Width="200px">
                <Template Context="data">
                    <code>ColorScheme.@data.Value</code>
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="ColorSchemeOption" Property="Description" Title="Description" />
        </Columns>
    </RadzenDataGrid>
</RadzenCard>

@code {
    class PropertyInfo
    {
        public string Name { get; set; }
        public string Type { get; set; }
        public string Description { get; set; }
    }

    class ComponentProperty
    {
        public string Name { get; set; }
        public string Type { get; set; }
        public string Default { get; set; }
        public string Description { get; set; }
    }

    class AlignmentOption
    {
        public string Value { get; set; }
        public string Description { get; set; }
    }

    class ColorSchemeOption
    {
        public string Value { get; set; }
        public string Description { get; set; }
    }


    List<ComponentProperty> componentProperties = new()
    {
        new ComponentProperty { Name = "Data", Type = "IEnumerable<TItem>", Default = "null", Description = "The data source containing flow information" },
        new ComponentProperty { Name = "SourceProperty", Type = "string", Default = "Required", Description = "Property name that provides the source node ID" },
        new ComponentProperty { Name = "TargetProperty", Type = "string", Default = "Required", Description = "Property name that provides the target node ID" },
        new ComponentProperty { Name = "ValueProperty", Type = "string", Default = "Required", Description = "Property name that provides the flow value" },
        new ComponentProperty { Name = "SourceLabelProperty", Type = "string", Default = "null", Description = "Property name that provides the source node label" },
        new ComponentProperty { Name = "TargetLabelProperty", Type = "string", Default = "null", Description = "Property name that provides the target node label" },
        new ComponentProperty { Name = "NodeFills", Type = "IList<string>", Default = "null", Description = "List of colors for nodes (overrides ColorScheme)" },
        new ComponentProperty { Name = "LinkFills", Type = "IList<string>", Default = "null", Description = "List of colors for links (overrides default)" },
        new ComponentProperty { Name = "NodeWidth", Type = "double", Default = "24", Description = "Width of the node rectangles in pixels" },
        new ComponentProperty { Name = "NodePadding", Type = "double", Default = "8", Description = "Vertical padding between nodes in pixels" },
        new ComponentProperty { Name = "NodeAlignment", Type = "SankeyAlignment", Default = "Justify", Description = "Vertical alignment of nodes within columns" },
        new ComponentProperty { Name = "ColorScheme", Type = "ColorScheme", Default = "Pastel", Description = "Built-in color scheme to use" },
        new ComponentProperty { Name = "Visible", Type = "bool", Default = "true", Description = "Whether the diagram is visible" },
        new ComponentProperty { Name = "Style", Type = "string", Default = "null", Description = "Inline CSS styles" },
        new ComponentProperty { Name = "Class", Type = "string", Default = "null", Description = "CSS class names" }
    };

    List<AlignmentOption> alignmentOptions = new()
    {
        new AlignmentOption { Value = "Justify", Description = "Nodes are distributed evenly in the vertical space (default)" },
        new AlignmentOption { Value = "Left", Description = "Nodes are aligned to the top of the diagram" },
        new AlignmentOption { Value = "Right", Description = "Nodes are aligned to the bottom of the diagram" },
        new AlignmentOption { Value = "Center", Description = "Nodes are centered vertically" }
    };

    List<ColorSchemeOption> colorSchemes = new()
    {
        new ColorSchemeOption { Value = "Pastel", Description = "Soft, muted colors (default)" },
        new ColorSchemeOption { Value = "Palette", Description = "Rich, vibrant color palette" },
        new ColorSchemeOption { Value = "Monochrome", Description = "Shades of blue" },
        new ColorSchemeOption { Value = "Divergent", Description = "Color scale from green to red" }
    };
}